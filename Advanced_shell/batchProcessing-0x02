#!/bin/bash

# List of Pokémon to fetch
POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

# Base URL for the Pokémon API
BASE_URL="https://pokeapi.co/api/v2/pokemon"

# Delay between requests (in seconds) to avoid rate limiting
DELAY=1

# Loop through each Pokémon
for pokemon in "${POKEMON_LIST[@]}"; do
    echo "Fetching data for $pokemon..."
    
    # Make the API request
    curl -s -f "$BASE_URL/$pokemon" -o "$pokemon.json" 2>>errors.txt
    
    # Check if the request was successful
    if [ $? -eq 0 ]; then
        echo "Successfully fetched data for $pokemon and saved to $pokemon.json"
    else
        echo "Failed to fetch data for $pokemon" >> errors.txt
    fi
    
    # Add delay between requests to avoid rate limiting
    if [ "$pokemon" != "${POKEMON_LIST[-1]}" ]; then
        echo "Waiting $DELAY seconds before next request..."
        sleep $DELAY
    fi
done

echo "All Pokémon data has been fetched!" 